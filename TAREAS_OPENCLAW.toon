proyecto: ColLawRAG
actualizado: 2026-02-18
ejecutor: OpenClaw (Santis)
url_produccion: https://col-law-rag.vercel.app
accuracy_actual: 35.9%
accuracy_baseline_original: 28.7%
modelo_generacion: deepseek/deepseek-v3-0324 via novita

estado_general:
  completadas: OC-A1 OC-A2 OC-A3 OC-A4
  pendientes: OC-A5 OC-A6 OC-A7 OC-A8
  crons_activos: OC-B1 OC-B2 OC-B3
  diferido_por_usuario: OC-A5 (cambio modelo generacion - hacer de último)

historial_completado[4]{id,titulo,fecha,resultado}:
  OC-A1,Benchmark accuracy baseline,2026-02-16,"28.7% accuracy (20 casos, postfix-deepseek-2026-02-16.json)"
  OC-A2,Re-ingestar corpus completo,2026-02-17,"36500 chunks, 609MB index.json, metadata area corregida"
  OC-A3,Benchmark post-reingest,2026-02-18,"35.9% accuracy (47/180 casos evaluados, 133 timeouts)"
  OC-A4,Upload indices + deploy Vercel,2026-02-17,"index.json.gz 206MB + bm25 38MB en GitHub Releases indices-v1"

tareas_pendientes[4]{id,prioridad,titulo,trigger,accion,output_esperado}:
  OC-A5,diferido,Swap modelo generacion a claude-sonnet/opus,cuando usuario lo apruebe,"Cambiar HF_GENERATION_MODEL en Vercel env vars + update lib/generation.ts si hardcoded + deploy","accuracy estimada +15-25% sin re-ingest"
  OC-A6,alta,"Upload indices a Vercel Blob (post CU-07)",Cursor confirma wiring en lib/retrieval.ts + BLOB_READ_WRITE_TOKEN lista,"node scripts/upload-indices-to-blob.mjs → actualiza data/indices-urls.json → deploy","cold start reducido 50s → <3s"
  OC-A7,alta,Benchmark post-Blob,OC-A6 completado + deploy live,"node scripts/evaluate-accuracy.mjs --url http://localhost:3000 (180 casos sin timeout)","accuracy completa 180/180 casos evaluados"
  OC-A8,media,Benchmark con modelo potente,OC-A5 completado,"node scripts/evaluate-accuracy.mjs --url http://localhost:3000","comparativa accuracy modelo viejo vs nuevo"

cron_jobs[3]{id,nombre,schedule,zona_horaria,objetivo}:
  OC-B1,Monitoreo diario produccion,"5 9 * * *",America/Bogota,"health check + 1 query prueba + alerta si >30s o HTTP!=200"
  OC-B2,Warm-up Vercel 3x dia,"0 7,13,19 * * *",America/Bogota,"curl /api/health para mantener instancia caliente"
  OC-B3,Reporte semanal calidad,"0 8 * * 1",America/Bogota,"calidad respuestas + avance roadmap + git log"

tareas_bajo_demanda[5]{id,titulo,cuando_usar,script}:
  OC-C3,Analisis cobertura corpus,detectar normas faltantes en indice,node inline + ls data/documents/
  OC-C4,Verificar vigencia normas,detectar normas desactualizadas,node scripts/vigencia-normas.mjs
  OC-C6,Analizar queries reales produccion,con usuarios reales en DB,node inline Postgres queries
  OC-C7,Test queries complejas,post cualquier re-ingesta o deploy,node scripts/test-complex-queries.mjs
  OC-C8,Reporte calidad manual,bajo demanda,node scripts/generate-quality-report.mjs

analisis_accuracy[5]{dimension,valor,descripcion}:
  score_promedio,3.59/10,sobre 47 casos evaluados
  area_mejor,constitucional 5.74/10,CP bien indexada y estructurada
  area_peor,tributario 1.40/10,ET poco cubierto + modelo alucina
  alucinaciones,87% de casos,LLM inventa numeros de articulo
  normas_faltantes,83% de casos,retrieval trae chunks proximos pero no el articulo exacto

causa_raiz_accuracy[3]{problema,descripcion,fix}:
  alucinacion_articulos,"RAG encuentra texto semanticamente similar pero LLM rellena numero de articulo de su memoria de entrenamiento (incorrecto)","cambiar modelo generacion a uno mas preciso (OC-A5)"
  cobertura_CST,"CST (laboral) y ET (tributario) estan fragmentados y mal cubiertos en el indice","agregar mas documentos del CST y ET a data/documents/"
  cold_start_50s,"retrieval.ts descarga 206MB de GitHub Releases en cada cold start","Vercel Blob (OC-A6 espera CU-07)"

flujo_con_cursor[6]{paso,actor,accion,esperando}:
  1,Cursor,CU-03 Neon Postgres + CU-07 wiring Vercel Blob,ya iniciado
  2,Cursor,Pasa BLOB_READ_WRITE_TOKEN a OpenClaw,tras crear Vercel Blob store
  3,OpenClaw,OC-A6 subir indices a Blob + deploy,BLOB_READ_WRITE_TOKEN recibido
  4,Cursor,CU-04 NextAuth + CU-05 Stripe,paralelo con OC-A6
  5,OpenClaw,OC-A7 benchmark 180 casos sin timeout,post deploy CU-07
  6,OpenClaw,OC-A5 swap modelo + OC-A8 benchmark final,cuando usuario apruebe

archivos_clave[5]{archivo,descripcion,ultima_modificacion}:
  data/benchmarks/local-benchmark-2026-02-18.json,Benchmark actual 35.9% accuracy 47/180 casos,2026-02-18
  data/indices-urls.json,URLs actuales de indices (GitHub Releases → cambiara a Blob),2026-02-17
  scripts/upload-indices-to-blob.mjs,Script listo para subir a Vercel Blob tras CU-07,2026-02-18
  ENV_VARS_PENDIENTES.md,Todas las env vars pendientes con instrucciones,2026-02-18
  lib/retrieval.ts,Retrieval hibrido (cosine + BM25) - Cursor modifica para Blob en CU-07,2026-02-17
